<!DOCTYPE html>
<html>
<head>
  <title>Authentiq example - Client side JS snippet</title>

  <!-- Open Graph -->
  <meta property="og:title" content="Authentiq example - Client side JS snippet" />
  <meta property="og:url" content="https://www.authentiq.com" />
  <meta property="og:type" content="website" />
  <meta property="og:description" content="Authentiq example - Client side JS snippet" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />

  <!-- Load our Bootstrap theme -->
  <link href="//cdn.authentiq.io/theme/3.3.7aq1/css/bootstrap.min.css" rel="stylesheet">

  <!-- Load needed fonts -->
  <link href="//fonts.googleapis.com/css?family=Montserrat:400,700|Noto+Serif:400,400italic,700|Material+Icons" rel="stylesheet" type="text/css">

  <!-- Favicon -->
  <link rel="shortcut icon" href="//www.authentiq.com/theme/images/apple-touch-icon.png" />

  <!--
      In order to use the snippet for client-side Apps do the following:

      1. Go to: https://dashboard.authentiq.com/

      2. Sign up & create a new "Client side app" application.

      3. Fill out any required fields such as the Client name and Redirect URI.

      4. Redirect URI is used by Authentiq to redirect back to your site after the sign in. This page has to load the snippet below too.

      5. Get the Client ID and use it in the snippet below in "data-client-id".


      Load the Authentiq snippet

      NOTE: the used client-id is only for demo purposes
      IMPORTANT: the class needs to be set like this
  -->
  <script src="//cdn.authentiq.io/authentiqjs/0.1.1-3/authentiq.js"
          class="authentiq-snippet"
          data-client-id="examples-authentiqjs">
  </script>

  <script>
    // let's handle some events that snippet will emit
    authentiq.subscribe('authorized', function(token){
      debug('authorized', token);
    });

    authentiq.subscribe('profile', function(profile){
      debug('profile', profile);
    });

    authentiq.subscribe('concluded', function(){
      debug('concluded');
    });

    authentiq.subscribe('error', function(error){
      debug('error', error);
    });
  </script>
</head>
<body>
  <div class="container">
    <h1>Authentiq snippet example - Fill forms</h1>
    <hr />

    <p class="lead">
      For testing this example you must have our app installed on your phone.
    </p>

    <p>
      <button class="authentiq-button"
              data-display="page"
              data-sign-out-claim="given_name">
        Sign in using your phone
      </button>
    </p>
    <br />
    <hr />

    <form role="form" action="" method="post">
      <div class="form-group">
        <label for="InputName">Your Name</label>
        <input type="text" class="form-control" name="InputName" id="InputName" placeholder="Enter Name" data-authentiq-profile-bind="name" required>
      </div>
      <div class="form-group">
        <label for="InputEmail">Your Email</label>
        <input type="email" class="form-control" id="InputEmail" name="InputEmail" placeholder="Enter Email" data-authentiq-profile-bind="email" required>
      </div>
      <div class="form-group">
        <label for="InputMessage">Message</label>
        <textarea name="InputMessage" id="InputMessage" class="form-control" rows="5" data-authentiq-profile-bind="phone_number" required></textarea>
      </div>

      <button type="submit" class="btn btn-default">Submit <span data-authentiq-profile-bind="given_name"></span></button>
    </form>

    <br />
    <hr />
    <h2>Console output</h2>
    <div id="console">
      <pre></pre>
    </div>
  </div>

  <!-- Load jQuery -->
  <script src="//code.jquery.com/jquery-2.1.4.min.js"></script>
  <script src="//cdn.authentiq.io/theme/3.3.7aq1/js/bootstrap.min.js"></script>

  <script>
    // helper function for demo purposes
    // this is not part of Authentiq snippet implementation
    function debug(command, data) {
      var row = $('<div>')
                    .addClass('row')
                    .append($('<div>')
                      .addClass('col-md-2 text-primary')
                      .text(command))
                    .append($('<div>')
                      .addClass('col-md-10')
                      .text(JSON.stringify(data, null, 2)));

      $('#console pre:first-child').prepend(row);

      if (command === 'concluded') {
        $('#console').prepend($('<pre>'));
      }
    }
  </script>
</body>
</html>
